<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Todo â€” Simple & Responsive</title>
  <style>
    /* ===== Base & layout ===== */
    :root{
      --bg:#0f1724; /* dark navy */
      --card:#0b1220;
      --muted:#9aa4b2;
      --accent:#7c5cff;
      --accent-2:#00d4ff;
      --success:#2dd4bf;
      --danger:#ff6b6b;
      --glass: rgba(255,255,255,0.04);
      --radius:14px;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    html,body{height:100%;}
    body{
      margin:0; background:linear-gradient(180deg,#051226 0%, #071225 100%); color:#e6eef6; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; display:flex; align-items:center; justify-content:center; padding:32px;
    }

    .app{
      width:100%; max-width:760px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:var(--radius); box-shadow: 0 8px 30px rgba(2,6,23,0.6); overflow:hidden; border:1px solid rgba(255,255,255,0.03);
    }

    header{
      padding:28px 28px 18px; display:flex; gap:16px; align-items:center; justify-content:space-between; background:linear-gradient(90deg, rgba(124,92,255,0.06), rgba(0,212,255,0.03));
    }
    header h1{margin:0;font-size:20px;letter-spacing:0.2px}
    header p{margin:0;color:var(--muted);font-size:13px}

    .controls{display:flex;gap:12px; align-items:center}

    /* ===== Input area ===== */
    .add-row{padding:20px;border-top:1px solid rgba(255,255,255,0.02);display:flex;gap:12px;align-items:center}
    .input-wrap{flex:1;display:flex}
    #newTask{
      width:100%; padding:12px 14px; border-radius:10px; border:1px solid rgba(255,255,255,0.03); background:transparent; color:inherit; outline:none; font-size:15px;
      box-shadow: inset 0 -6px 18px rgba(0,0,0,0.35);
    }
    #newTask::placeholder{color:rgba(230,238,246,0.35)}

    button.btn{
      border:0;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:600;display:inline-flex;align-items:center;gap:8px;justify-content:center
    }
    .btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#061018}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.03);color:var(--muted)}

    /* ===== List ===== */
    .list{padding:18px 20px 28px; display:flex;flex-direction:column;gap:10px}
    .task{
      display:flex;align-items:center;gap:12px;padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005)); border:1px solid rgba(255,255,255,0.02);
    }
    .task .left{display:flex;align-items:center;gap:12px;flex:1}
    .task input[type="checkbox"]{width:18px;height:18px;accent-color:var(--accent);cursor:pointer}
    .label{
      font-size:15px;min-width:0; word-break:break-word;outline:none;padding:4px 6px;border-radius:8px;
    }
    .label.completed{ text-decoration: line-through; color: rgba(230,238,246,0.45) }

    .task .actions{display:flex;gap:8px}
    .icon-btn{background:transparent;border:0;padding:6px;border-radius:8px;cursor:pointer;color:var(--muted)}
    .icon-btn[aria-pressed="true"]{background:rgba(255,255,255,0.02); color:var(--accent)}

    /* small helper */
    .muted{color:var(--muted); font-size:13px}

    /* responsive */
    @media (max-width:520px){
      header{padding:18px}
      .add-row{padding:14px}
      .task{padding:10px}
      #newTask{padding:10px}
    }

    /* tiny animations */
    .fade-in{animation:fadeIn .18s ease}
    @keyframes fadeIn{from{opacity:0; transform:translateY(-6px)} to{opacity:1; transform:none}}

  </style>
</head>
<body>
  <div class="app" role="application" aria-labelledby="appTitle">
    <header>
      <div>
        <h1 id="appTitle">My Tasks</h1>
        <p class="muted">Simple, fast, and responsive to-do list</p>
      </div>
      <div class="controls">
        <div class="muted" id="count">0 tasks</div>
        <button class="btn ghost" id="clearCompleted" title="Clear completed tasks">Clear done</button>
      </div>
    </header>

    <div class="add-row">
      <div class="input-wrap">
        <input id="newTask" type="text" placeholder="Add a task (press Enter to add)" aria-label="New task" />
      </div>
      <button class="btn primary" id="addBtn" aria-label="Add task">Add</button>
    </div>

    <main class="list" id="list" aria-live="polite"></main>
  </div>

  <script>
    /* ===== Simple Todo App (no frameworks) =====
       Features implemented:
       - add, toggle complete, delete, edit text
       - persistent storage via localStorage
       - accessible controls and keyboard-friendly interactions
       - clean modular code
    */

    const STORAGE_KEY = 'todo.tasks.v1';

    // --- Utilities ---
    const uid = ()=> Date.now().toString(36) + Math.random().toString(36).slice(2,7);

    function qs(sel, ctx=document){ return ctx.querySelector(sel) }
    function qsa(sel, ctx=document){ return Array.from(ctx.querySelectorAll(sel)) }

    // --- Model ---
    let tasks = [];

    function save(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(tasks)) }
    function load(){ try{ const raw = localStorage.getItem(STORAGE_KEY); tasks = raw ? JSON.parse(raw) : []; }catch(e){ tasks = [] } }

    // --- DOM references ---
    const listEl = qs('#list');
    const newTaskEl = qs('#newTask');
    const addBtn = qs('#addBtn');
    const countEl = qs('#count');
    const clearCompletedBtn = qs('#clearCompleted');

    // --- Render ---
    function render(){
      listEl.innerHTML = '';
      if (tasks.length === 0){
        const placeholder = document.createElement('div'); placeholder.className = 'muted'; placeholder.style.padding = '26px'; placeholder.textContent = 'No tasks yet â€” add one above!'; listEl.appendChild(placeholder);
      }

      tasks.forEach(task => {
        const row = document.createElement('div'); row.className = 'task fade-in'; row.setAttribute('data-id', task.id);

        const left = document.createElement('div'); left.className = 'left';

        const cb = document.createElement('input'); cb.type='checkbox'; cb.checked = !!task.completed; cb.setAttribute('aria-label','Mark task complete');
        cb.addEventListener('change', ()=>{ toggleComplete(task.id); });

        const label = document.createElement('div'); label.className = 'label'; label.tabIndex = 0; label.textContent = task.text;
        if (task.completed) label.classList.add('completed');

        // allow inline editing via double click or Enter while focused
        label.addEventListener('dblclick', ()=> startEdit(task.id, label));
        label.addEventListener('keydown', (e)=>{ if (e.key === 'Enter') { e.preventDefault(); startEdit(task.id, label); } });

        left.appendChild(cb); left.appendChild(label);

        const actions = document.createElement('div'); actions.className = 'actions';

        const editBtn = document.createElement('button'); editBtn.className = 'icon-btn'; editBtn.title = 'Edit task'; editBtn.innerHTML = 'âœŽ';
        editBtn.addEventListener('click', ()=> startEdit(task.id, label));

        const delBtn = document.createElement('button'); delBtn.className = 'icon-btn'; delBtn.title = 'Delete task'; delBtn.innerHTML = 'ðŸ—‘';
        delBtn.addEventListener('click', ()=> { removeTask(task.id); });

        actions.appendChild(editBtn); actions.appendChild(delBtn);

        row.appendChild(left); row.appendChild(actions);
        listEl.appendChild(row);
      });

      updateCount();
    }

    // --- Actions ---
    function addTask(text){
      const trimmed = text.trim(); if (!trimmed) return;
      const t = { id: uid(), text: trimmed, completed:false };
      tasks.unshift(t); save(); render();
    }

    function removeTask(id){ tasks = tasks.filter(t=>t.id !== id); save(); render(); }
    function toggleComplete(id){ const t = tasks.find(x=>x.id===id); if (!t) return; t.completed = !t.completed; save(); render(); }

    function updateCount(){ const total = tasks.length; const done = tasks.filter(t=>t.completed).length; countEl.textContent = `${total} task${total===1 ? '' : 's'} Â· ${done} done`; }

    function clearCompleted(){ tasks = tasks.filter(t=>!t.completed); save(); render(); }

    // --- Inline edit ---
    function startEdit(id, labelEl){
      const original = labelEl.textContent;
      const input = document.createElement('input'); input.type='text'; input.className='label'; input.value = original; input.style.minWidth='120px';
      // replace
      labelEl.replaceWith(input);
      input.focus(); input.setSelectionRange(input.value.length, input.value.length);

      function commit(){
        const val = input.value.trim();
        if (val){ const t = tasks.find(x=>x.id===id); if (t) t.text = val; }
        else { /* If empty after edit, remove task */ removeTask(id); return; }
        save(); render();
      }
      function cancel(){ render(); }

      input.addEventListener('keydown', (e)=>{
        if (e.key === 'Enter'){ commit(); }
        else if (e.key === 'Escape'){ cancel(); }
      });
      input.addEventListener('blur', commit);
    }

    // --- Events ---
    addBtn.addEventListener('click', ()=>{ addTask(newTaskEl.value); newTaskEl.value=''; newTaskEl.focus(); });
    newTaskEl.addEventListener('keydown', (e)=>{ if (e.key === 'Enter'){ addTask(newTaskEl.value); newTaskEl.value=''; } });
    clearCompletedBtn.addEventListener('click', ()=>{ clearCompleted(); });

    // --- Init ---
    function init(){ load(); render(); }
    init();

    // Expose some helpers to window (debug)
    window._todo = { addTask, removeTask, tasks };
  </script>
</body>
</html>
